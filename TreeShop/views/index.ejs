<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tree Shop</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body { background-color: #f8f9fa; }
        .header { background-color: #5a7d5a; padding: 10px 20px; color: white; display: flex; justify-content: space-between; align-items: center; }
        .container { background: white; padding: 20px; border-radius: 10px; box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1); }
        img { border-radius: 5px; }
    </style>
</head>
<body>
    <header class="header">
        <h1>Tree Shop</h1>
        <a href="/about" class="btn btn-outline-light">About me</a>
    </header>

    <div class="container mt-4">
        <h2 class="text-center">Tree Shop</h2>
        <form id="treeForm" class="form p-4 border rounded shadow-sm bg-light" action="/add" method="POST" enctype="multipart/form-data">
            <input type="hidden" name="id" id="editMode">
            
            <div class="mb-3">
                <label class="form-label fw-bold">Tree Name</label>
                <input type="text" name="treename" id="treeName" class="form-control" required>
            </div>
        
            <div class="mb-3">
                <label class="form-label fw-bold">Description</label>
                <textarea name="description" id="treeDescription" class="form-control" required></textarea>
            </div>
        
            <div class="mb-3">
                <label class="form-label fw-bold">Image</label>
                <input type="file" name="image" id="treeImage" class="form-control">
            </div>
        
            <div class="d-flex justify-content-between">
                <button type="submit" class="btn btn-success w-48">Add / Update</button>
            </div>
        </form>
        
        <form id="resetForm" action="/reset" method="POST" class="mt-3 text-center">
            <button type="submit" class="btn btn-danger w-10" onclick="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô d·ªØ li·ªáu kh√¥ng?')">Clear All</button>
        </form>
        
        <table class="table mt-4">
            <thead class="table-success">
                <tr>
                    <th>Id</th>
                    <th>Name</th>
                    <th>Image</th>
                    <th>Description</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <% trees.forEach(tree => { %>
                    <tr>
                        <td><%= tree._id %></td>
                        <td><%= tree.treename %></td>
                        <td><img src="<%= tree.image %>" width="50"></td>
                        <td><%= tree.description %></td>
                        <td>
                            <button class="btn btn-sm btn-outline-primary" onclick="editTree('<%= tree._id %>', '<%= tree.treename %>', '<%= tree.description %>')">‚úè</button>
                            <a href="/delete/<%= tree._id %>" class="btn btn-sm btn-outline-danger">üóë</a>
                        </td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
    </div>

    <script>
        function editTree(id, name, description) {
            document.getElementById("editMode").value = id;
            document.getElementById("treeName").value = name;
            document.getElementById("treeDescription").value = description;
        }
    </script>
</body>
</html>